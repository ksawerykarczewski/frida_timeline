"use strict";const link="https://spreadsheets.google.com/feeds/list/1RFOqG5y5zjhd7gwNB5fC9Wgw-XaPf4PjEMYlEBaOj-M/od6/public/values?alt=json",template=document.querySelector("template").content;let counter=1;const modal=document.querySelector(".modal-bg"),modalUl=document.querySelector(".modal-content ul");function loadSVG(e){document.querySelector(".SVG_timeline").innerHTML=e,fetchLink(link)}function fetchLink(e){fetch(e).then(e=>e.json()).then(e=>e.feed.entry.forEach(displayEvent))}function displayEvent(e){const t=template.cloneNode("true");10==counter&&(counter=0),t.querySelector("section").id="section"+counter,t.querySelector("h1").textContent=e.gsx$heading.$t,t.querySelector(".date").textContent=e.gsx$date.$t,t.querySelector(".text p").textContent=e.gsx$text.$t,t.querySelector(".text2 p").textContent=e.gsx$text2.$t,t.querySelector(".point_img").src="../imgs/"+e.gsx$image.$t,t.querySelector(".painting").src="../imgs/"+e.gsx$painting.$t,t.querySelector(".point_img_caption").textContent=e.gsx$imagecaption.$t,t.querySelector(".painting_caption").textContent=e.gsx$paintingcaption.$t,""!=e.gsx$quote.$t&&(t.querySelector(".quote").textContent=e.gsx$quote.$t,t.querySelector(".quote").style.display="block"),document.querySelector(".svgtext"+counter).textContent=e.gsx$heading.$t;const n=document.createElement("li"),o=document.createElement("div"),i=document.createElement("p");t.querySelector(".doodle").id="doodle"+counter,i.textContent=e.gsx$heading.$t,i.id="category"+counter,fetch("imgs/svg/"+e.gsx$doodlesvg.$t).then(e=>e.text()).then(e=>(function(e){o.innerHTML=e,t.querySelector(".doodle").innerHTML=e,document.querySelector("main").appendChild(t),main()})(e)),n.appendChild(o),n.appendChild(i),modalUl.appendChild(n),counter++}function main(){zoomHero();const e=document.querySelectorAll("section"),t=document.querySelector("#date_vertical h1"),n={root:null,rootMargin:"0px",threshold:[0,.01,.28,.3,.31,.49,.5,.75,1]},o=document.querySelectorAll(".point_img");let i=new IntersectionObserver(e=>{e.forEach(e=>{if(e.intersectionRatio>.65){e.target.classList.add("animate"),document.querySelector("#grave").style.display="block";document.querySelector("#grave")}else e.target.classList.contains("animate")&&(e.target.classList.remove("animate"),document.querySelector("#grave").style.display="none")})},n);o.forEach(e=>{i.observe(e)});let r=new IntersectionObserver(e=>{e.forEach(e=>{let n=e.target.id[e.target.id.length-1],o=e.target.querySelector(".date").textContent,i=o.substring(o.length-4);e.intersectionRatio>.27?("section1"==e.target.id&&e.intersectionRatio>.3&&document.querySelector(".SVG_timeline").classList.add("opacity-animation"),document.querySelector("#category"+n).style.textDecoration="underline",document.querySelector("#circle"+n).style.fill="black",window.onscroll=function(e){this.oldScroll<this.scrollY?t.innerHTML<i&&(t.classList.add("year-animation"),t.addEventListener("animationend",()=>{t.innerHTML=i,t.classList.remove("year-animation")})):this.oldScroll>this.scrollY&&t.innerHTML>i&&(t.classList.add("year-animation"),t.addEventListener("animationend",()=>{t.innerHTML=i,t.classList.remove("year-animation")})),this.oldScroll=this.scrollY}):(document.querySelector("#category"+n).style.textDecoration="none",document.querySelector("#circle"+n).style.fill="var(--main-bg-color)")})},n);function l(e){let t=e.target.id[e.target.id.length-1];document.querySelector(".svgtext"+t).style.display="block",document.querySelector(".path"+t).style.display="block"}function c(e){let t=e.target.id[e.target.id.length-1];document.querySelector(".svgtext"+t).style.display="none",document.querySelector(".path"+t).style.display="none"}function a(e){modal.classList.contains("hide")||(modal.classList.add("hide"),burger_animation.setDirection(-1),burger_animation.play());let t=e.target.id[e.target.id.length-1];document.querySelector("#section"+t).scrollIntoView({block:"start"})}e.forEach(e=>{r.observe(e),console.log("now hi")}),document.querySelectorAll("circle").forEach(e=>{e.addEventListener("click",a),e.addEventListener("mouseenter",l),e.addEventListener("mouseleave",c)}),document.querySelectorAll("li").forEach(e=>{e.addEventListener("click",a)}),document.querySelector("#bm").addEventListener("click",toggleModal)}function zoomHero(){window.addEventListener("scroll",(function(){let e=100+this.window.scrollY/7;this.document.querySelector(".hero").style.backgroundSize=e+"% "+e+"%"}))}function toggleModal(){modal.classList.contains("hide")?(modal.classList.remove("hide"),burger_animation.setDirection(1),burger_animation.play()):(modal.classList.add("hide"),burger_animation.setDirection(-1),burger_animation.play())}fetch("../timeline with tooltip.svg").then(e=>e.text()).then(e=>loadSVG(e));let burger_animation=lottie.loadAnimation({container:document.querySelector("#bm"),renderer:"svg",loop:!1,autoplay:!1,path:"data_menu.json"});burger_animation.setSpeed(2.1),AOS.init({duration:1200});
